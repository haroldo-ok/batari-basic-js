<!doctype html>
<html lang="en-us">
  <head>
	<title>A quick and dirty experiment on compiling Batari Basic programs on the Browser.</title>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">  
  </head>
  <body>
	<h1 class="title">A quick and dirty experiment on compiling Batari Basic programs on the Browser.</h1>
  
	<style>
		textarea {
			white-space: pre;
		}
		
		.fill-vertically {
			height: 60vh;
			overflow-y: auto;
		}
		
		.full-height {
			height: 100%;
		}
		
		.full-height-without-heading.textarea[rows] {
			height: calc(100% - 3em);
		}
		
		.footer {
			padding: 0;
		}
		
		.float-right {
			float: right;
		}
	</style>

	<div class="columns is-mobile">

		<div class="column fill-vertically">
			<div class="panel full-height is-primary">
				<p class="panel-heading">
					Input
                    <button id="compile-button" class="button is-outlined is-small float-right">
					  <span>▶️ Compile</span>
					</button>
				</p>
				<textArea id="input" class="textarea is-family-code full-height-without-heading" rows="10">
 rem Hello World

 playfield:
................................
......X.X.XXX.X...X...XXX.......
......X.X.X...X...X...X.X.......
......XXX.XX..X...X...X.X.......
......X.X.X...X...X...X.X.......
......X.X.XXX.XXX.XXX.XXX.......
................................
.....X...X.XXX.XX..X...XX.......
.....X...X.X.X.X.X.X...X.X......
.....X.X.X.X.X.XX..X...X.X......
.....XX.XX.XXX.X.X.XXX.XX.......
end

 COLUPF = 22
 COLUBK = 2

mainloop
 drawscreen
 score = score + 1
 goto mainloop

				</textArea>
			</div>
		</div>

		<div id="output" class="column fill-vertically">
		
			<div class="panel is-warning">
				<p class="panel-heading">Loading</p>
				<textArea id="preprocess" class="textarea is-family-code">Please wait...</textArea>
			</div>
			
		</div>
		
		<div class="column fill-vertically is-success">
			<div class="panel is-success">
				<p class="panel-heading">Results</p>
				<div class="block"></div>
				<div class="block">
					<button id="downloadROM" class="button is-success" disabled>Download ROM</button>
				</div>
				<div id="javatari" class="block">
					<div id="javatari-screen"></div>
				</div>
			</div>
		</div>
	</div>
	
	<footer class="footer">
		<div class="panel is-danger">
			<p class="panel-heading">Errors</p>
			<textArea id="error" class="textarea is-family-code has-text-danger" style="color: red"></textArea>
		</div>
	</footer>
  
    <script type="text/javascript" src="third-party/bb2600basic.js"></script>
    <script type="text/javascript" src="third-party/bbpreprocess.js"></script>
    <script type="text/javascript" src="third-party/dasm.js"></script>
    <script type="text/javascript" src="third-party/FileSaver.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/underscore@1.12.0/underscore-min.js"></script>
	
    <script type="text/javascript" src="fsContents.js"></script>
    <script type="text/javascript" src="compiler.js"></script>
    <script type="text/javascript" src="ui.js"></script>
	
	<script src="third-party/javatari.js"></script>
  </body>
</html>
